<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libclod: libclod</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libclod
   </div>
   <div id="projectbrief">C library for interacting with NBTs, region files, LOD data and other things.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">libclod </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<p>C library for interacting with NBT data, region files, LOD data, data storage and other things.</p>
<p>Libclod is licenced under the <a href="./LICENCE.txt">GNU Affero General Public License v3.0</a> or later. For alternate licencing contact me.</p>
<p>Libclod is still a work in progress.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md12"></a>
Dependencies</h1>
<p>All dependencies are optional! They can be enabled or disabled at build time, thereby omitting the features said dependency provided. The only exception is the C standard library.</p>
<p>That being said, omitting the majority of compression libraries will make most file formats that this library interacts with unreadable. Region files, for example, typically use zlib compression, which requires libdeflate. Vendoring some of these dependencies might be a good idea to implement in future.</p>
<p>I reserve the right to use the entire feature set of these dependencies; using libclod with dependencies that have features intentionally disabled is, in general, not supported, although many specific cases would be fine.</p>
<ul>
<li>libc</li>
<li>libdeflate <span class="tt">-DUSE_LIBDEFLATE=ON/OFF</span></li>
<li>liblz4 <span class="tt">-DUSE_LIBLZ4=ON/OFF</span></li>
<li>liblzma <span class="tt">-DUSE_LIBLZMA=ON/OFF</span></li>
<li>libzstd <span class="tt">-DUSE_LIBZSTD=ON/OFF</span></li>
<li>libbz2 <span class="tt">-DUSE_LIBBZ2=ON/OFF</span></li>
<li>sqlite3 <span class="tt">-DUSE_SQLITE3=ON/OFF</span></li>
<li>libpq <span class="tt">-DUSE_LIBPQ=ON/OFF</span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md13"></a>
Platforms</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md14"></a>
Linux</h3>
<p>Linux is fully supported and tested with posix code paths. Some linux-specific optimisations are enabled when possible.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md15"></a>
BSD</h3>
<p>BSD variants should hopefully work out of the box with posix code paths. It's possible I missed some things, and minor changes are required for BSD support.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
macOS</h3>
<p>macOS should hopefully work out of the box with posix code paths. It's possible I missed some things, and minor changes are required for macOS support.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md17"></a>
Windows</h3>
<p>Windows is the only OS that doesn't play well with others, so platform-specific code sections will need to be rewritten from scratch for the Windows API. I have intentionally left space in the codebase for this, but don't have a Windows development environment to work on them.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
Building</h1>
<p>Building requires CMake &gt;= 4.0 and a C23 compliant toolchain. GCC has been specifically optimised for, but CLang also does a fine job and is known to work. If a C23 compliant toolchain doesn't work with this library, then fixing that is a goal.</p>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">cmake --build .</div>
<div class="line">ctest .</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
Public headers</h1>
<ul>
<li><span class="tt"><a class="el" href="compression_8h.html">clod/compression.h</a></span> - Generalised interface for compression algorithms.</li>
<li><span class="tt"><a class="el" href="hash_8h.html">clod/hash.h</a></span> - Hashing functions.</li>
<li><span class="tt"><a class="el" href="nbt_8h.html">clod/nbt.h</a></span> - NBT parsing and writing.</li>
<li><span class="tt"><a class="el" href="region_8h.html">clod/region.h</a></span> - Region storage.</li>
<li><span class="tt"><a class="el" href="table_8h.html">clod/table.h</a></span> - Hash table implementation.</li>
</ul>
<p>Some standalone headers are also included for things such as sized-strings, vector math and big-endian encoding.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
Features</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md21"></a>
<a href="https://stewi1014.github.io/libclod/group__compression.html">Compression wrappers</a></h2>
<p>Libclod wraps some compression libraries to provide a single compress and decompress method with uniform behavior across all compression methods it supports. Most compression methods attempt to be compatible with some existing format. It is used internally and might be helpful for FFI users who have slow native compression libraries. Shoutout to libdeflate for being a work of art.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
<a href="https://stewi1014.github.io/libclod/group__nbt.html">NBT parsing</a></h2>
<p>The NBT parser is fast and doesn't use any memory. It doesn't have an intermediate data structure. It recursively steps through NBT data at approx 6GB/s on my machine.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md23"></a>
<a href="https://stewi1014.github.io/libclod/group__region.html">Region storage</a></h2>
<p>This is not a region file parser, although it might be a good idea to expose a public interface for that in the future. Instead, libclod's region storage implements the whole storage system, providing a fast and memory-efficient coordinate-&gt;blob file-backed storage database that leverages low-level OS features to optimise access.</p>
<p>It extends the vanilla implementation with a number of new features, including support for more compression algorithms, up to 10 dimension coordinates, crash recovery, effective concurrency, strong data validation and more.</p>
<p>These new features are built on top of a revised file format that is (optionally) backwards compatible with vanilla region files and supports future extensibility with dynamic storage in the header.</p>
<p>Multithreaded usage is supported, including from coroutines, and is well optimised. However, multiple processes writing at the same time is not supported. That might seem obvious, but I don't feel like it's an unreasonable feature to ask for. Libclod is already aiming to implement features that make it look like a database; it's not a stretch to ask for one more database-like feature. I would have implemented this already; POSIX robust shared mutexes are an obvious choice, but macOS's shared mutexes aren't robust and Windows doesn't even have shared mutexes. I want to know what kind of architecture is needed for whatever features Windows and macOS might have for this. Or, complete sufficient research that I'm satisfied in saying I can't ever support macOS or Windows, and architect the feature around Linux and BSD exclusively. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.16.1 </li>
  </ul>
</div>
</body>
</html>
